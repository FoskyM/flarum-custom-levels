(()=>{var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{extend:()=>a});const s=flarum.core.compat["common/extenders"];var o=e.n(s);const l=flarum.core.compat["common/models/User"];var r=e.n(l);const a=[new(o().Model)(r()).attribute("expLevel").attribute("expPercent").attribute("expTotal")],n=flarum.core.compat["admin/app"];var i=e.n(n);function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,c(e,t)}flarum.core.compat.extend;const p=flarum.core.compat["admin/components/ExtensionPage"];var v=e.n(p);const f=flarum.core.compat["common/components/Switch"];var d=e.n(f);const y=flarum.core.compat["common/app"];var x=e.n(y);const h=flarum.core.compat["common/Component"];var g=e.n(h);const b=flarum.core.compat["common/components/Tooltip"];var k=e.n(b);const T=flarum.core.compat["common/utils/extractText"];var F=e.n(T),N=function(e){function t(){return e.apply(this,arguments)||this}u(t,e);var s=t.prototype;return s.oninit=function(t){e.prototype.oninit.call(this,t)},s.view=function(){var e,t,s=this.attrs.user,o=!1;return e=x().forum.attribute("foskym-custom-levels.levelText")||F()(x().translator.trans("foskym-custom-levels.lib.defaults.level")),t=x().forum.attribute("foskym-custom-levels.expText")||F()(x().translator.trans("foskym-custom-levels.lib.defaults.exp")),isNaN(s.expTotal())||isNaN(s.expPercent())||isNaN(s.expLevel())||s.expTotal()<0||s.expPercent()<0||s.expLevel()<0?(o=!0,t=F()(x().translator.trans("foskym-custom-levels.lib.error.calculation"))):(t=t.replace("[expTotal]",s.expTotal()),e=e.indexOf("[level]")>-1?e.replace("[level]",s.expLevel()):e+" "+s.expLevel()),o?m("div",{class:"CustomLevel-level"},t):m(k(),{text:t},m("div",{class:"CustomLevel-level"},m("span",{class:"CustomLevel-text"},e),m("div",{class:"CustomLevel-bar"},m("div",{class:"CustomLevel-bar-value",style:"width: "+s.expPercent()+"%;"}))))},t}(g());const P=flarum.core.compat["common/helpers/avatar"];var O=e.n(P),w=function(e){function t(){for(var t,s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).user=i().session.user,t}u(t,e);var s=t.prototype;return s.oninit=function(t){e.prototype.oninit.call(this,t)},s.refresh=function(){var e=this;i().store.find("users",i().session.user.id()).then((function(t){e.user=t,m.redraw()}))},s.content=function(){return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,i().translator.trans("foskym-custom-levels.admin.settings.levelText")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.levelDesc")),m("input",{type:"text",className:"FormControl",bidi:this.setting("foskym-custom-levels.levelText"),placeholder:i().translator.trans("foskym-custom-levels.lib.defaults.level")})),m("div",{className:"Form-group"},m("label",null,i().translator.trans("foskym-custom-levels.admin.settings.expText")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.expDesc")),m("input",{type:"text",className:"FormControl",bidi:this.setting("foskym-custom-levels.expText"),placeholder:i().translator.trans("foskym-custom-levels.lib.defaults.exp")})),m("div",{className:"Form-group"},m("label",null,i().translator.trans("foskym-custom-levels.admin.settings.expFormula")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.expFormulaDesc1")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.expFormulaDesc2")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.expFormulaDesc3")),m("textarea",{rows:3,style:"max-width: 400px;",className:"FormControl",bidi:this.setting("foskym-custom-levels.expFormula"),placeholder:i().translator.trans("foskym-custom-levels.lib.defaults.expFormula")})),m("div",{className:"Form-group"},m("label",null,i().translator.trans("foskym-custom-levels.admin.settings.levelFormula")),m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.levelFormulaDesc")),m("input",{type:"text",className:"FormControl",bidi:this.setting("foskym-custom-levels.levelFormula"),placeholder:i().translator.trans("foskym-custom-levels.lib.defaults.levelFormula")})),m("div",{className:"Form-group"},m("div",{class:"helpText"},i().translator.trans("foskym-custom-levels.admin.settings.roundDesc")),m(d(),{state:!!this.setting("foskym-custom-levels.round")()&&"0"!==this.setting("foskym-custom-levels.round")(),onchange:this.setting("foskym-custom-levels.round")},i().translator.trans("foskym-custom-levels.admin.settings.round"))),m("div",{className:"Form-group"},m("label",null,i().translator.trans("foskym-custom-levels.admin.preview")),m("div",{style:"margin-left: 6px"},O()(this.user)),N.component({user:this.user})),this.submitButton())))},s.saveSettings=function(t){var s=this;return e.prototype.saveSettings.call(this,t).then((function(){return s.refresh()}))},t}(v());i().initializers.add("foskym/flarum-custom-levels",(function(){i().extensionData.for("foskym-custom-levels").registerPage(w)}))})(),module.exports=t})();
//# sourceMappingURL=admin.js.map