(()=>{var __webpack_modules__={717:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>LevelBar});var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(578),flarum_forum_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(563),flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(flarum_forum_app__WEBPACK_IMPORTED_MODULE_0__),flarum_common_Component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(229),flarum_common_Component__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(flarum_common_Component__WEBPACK_IMPORTED_MODULE_1__),flarum_common_components_Tooltip__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(931),flarum_common_components_Tooltip__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(flarum_common_components_Tooltip__WEBPACK_IMPORTED_MODULE_2__),LevelBar=function(_Component){function LevelBar(){return _Component.apply(this,arguments)||this}(0,_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_3__.Z)(LevelBar,_Component);var _proto=LevelBar.prototype;return _proto.oninit=function(e){_Component.prototype.oninit.call(this,e)},_proto.view=function view(){var user=this.attrs.user,levelText=flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().forum.attribute("foskym-custom-levels.levelText")||flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().translator.trans("foskym-custom-levels.lib.defaults.level")[0],expText=flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().forum.attribute("foskym-custom-levels.expText")||flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().translator.trans("foskym-custom-levels.lib.defaults.exp")[0],expFormula=flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().forum.attribute("foskym-custom-levels.expFormula")||flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().translator.trans("foskym-custom-levels.lib.defaults.expFormula")[0],levelFormula=flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().forum.attribute("foskym-custom-levels.levelFormula")||flarum_forum_app__WEBPACK_IMPORTED_MODULE_0___default().translator.trans("foskym-custom-levels.lib.defaults.levelFormula")[0];expFormula=expFormula.replace("[commentCount]",user.commentCount()).replace("[discussionCount]",user.discussionCount()),"antoinefr-money"in flarum.extensions&&(expFormula=expFormula.replace("[money]",user.attribute("money")||0)),"clarkwinkelmann-likes-received"in flarum.extensions&&(expFormula=expFormula.replace("[likesReceived]",user.attribute("likesReceived")||0));var expTotal=Math.floor(eval(expFormula)),expLevel=0,expPercent=0;if(levelFormula=levelFormula.replace("[expTotal]",expTotal),levelFormula.indexOf("[level]")>-1){for(var n=1;n<eval(levelFormula.replace("[level]",n));)n++;expLevel=Math.floor(n-1),expPercent=100*(eval(levelFormula.replace("[level]",expLevel))-expLevel),expPercent>100&&(expPercent=100*(eval(levelFormula.replace("[level]",expLevel))-expLevel-1))}else expLevel=Math.floor(eval(levelFormula)),expPercent=100*(eval(levelFormula)-expLevel);return expText=expText.replace("[expTotal]",expTotal),levelText=levelText.indexOf("[level]")>-1?levelText.replace("[level]",expLevel):levelText+" "+expLevel,m(flarum_common_components_Tooltip__WEBPACK_IMPORTED_MODULE_2___default(),{text:expText},m("div",{class:"CustomLevel-level"},m("span",{class:"CustomLevel-text"},levelText),m("div",{class:"CustomLevel-bar CustomLevel-bar--empty"}),m("div",{class:"CustomLevel-bar",style:"width: "+expPercent+"%;"})))},LevelBar}(flarum_common_Component__WEBPACK_IMPORTED_MODULE_1___default())},229:e=>{"use strict";e.exports=flarum.core.compat["common/Component"]},931:e=>{"use strict";e.exports=flarum.core.compat["common/components/Tooltip"]},563:e=>{"use strict";e.exports=flarum.core.compat["forum/app"]},578:(e,_,r)=>{"use strict";function o(e,_){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,_){return e.__proto__=_,e},o(e,_)}function t(e,_){e.prototype=Object.create(_.prototype),e.prototype.constructor=e,o(e,_)}r.d(_,{Z:()=>t})}},__webpack_module_cache__={};function __webpack_require__(e){var _=__webpack_module_cache__[e];if(void 0!==_)return _.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var _=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(_,{a:_}),_},__webpack_require__.d=(e,_)=>{for(var r in _)__webpack_require__.o(_,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:_[r]})},__webpack_require__.o=(e,_)=>Object.prototype.hasOwnProperty.call(e,_),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__);const e=flarum.core.compat["common/app"];__webpack_require__.n(e)().initializers.add("foskym/flarum-custom-levels",(function(){console.log("[foskym/flarum-custom-levels] Hello, forum and admin!")}));var _=__webpack_require__(563),r=__webpack_require__.n(_);const o=flarum.core.compat["common/extend"],t=flarum.core.compat["forum/components/PostUser"];var l=__webpack_require__.n(t);flarum.core.compat["forum/components/UserCard"];var a=__webpack_require__(717);r().initializers.add("foskym/flarum-custom-levels",(function(){(0,o.extend)(l().prototype,"view",(function(e){var _=this.attrs.post.user();_&&e.children.push(a.Z.component({user:_}))}))}))})(),module.exports=__webpack_exports__})();
//# sourceMappingURL=forum.js.map
